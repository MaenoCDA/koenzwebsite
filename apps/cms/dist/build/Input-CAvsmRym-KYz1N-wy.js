import{lB as A,lC as U,lD as B,r as n,lE as j,lF as g,j as s,B as M,U as p,n as R}from"./strapi-BFIgV8L0.js";function V(e){A(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}U(U({},B),{textComponent:n.Fragment});var _=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=n.createContext(null)):n.createContext(null);_.Consumer;_.Provider;var k=_;function b(){var e=n.useContext(k);return V(e),e}var x;(function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"})(x||(x={}));var w;(function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"})(w||(w={}));function E(e){var o=function(t){var a=b(),i=t.value,c=t.children,l=j(t,["value","children"]),u=typeof i=="string"?new Date(i||0):i,v=e==="formatDate"?a.formatDateToParts(u,l):a.formatTimeToParts(u,l);return c(v)};return o.displayName=w[e],o}function h(e){var o=function(t){var a=b(),i=t.value,c=t.children,l=j(t,["value","children"]),u=a[e](i,l);if(typeof c=="function")return c(u);var v=a.textComponent||n.Fragment;return n.createElement(v,null,u)};return o.displayName=x[e],o}h("formatDate");h("formatTime");h("formatNumber");h("formatList");h("formatDisplayName");E("formatDate");E("formatTime");const $=e=>{if(e.includes("vimeo")){const o=/^https?:\/\/(?:www\.)?vimeo\.com\/(?:(?:channels\/[\w]+\/)|(groups\/[\w]+\/videos\/))?(\d+)(?:\/([\w]+))?/,t=e.match(o);if(t&&t[1])return{provider:"vimeo",providerUid:t[1],privacyHash:t[2]||null}}if(e.includes("youtube")||e.includes("youtu.be")){const o=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\/)|(\?v=|\&v=))([^#\&\?]{11}).*/,t=/youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/,a=e.match(o);if(a&&a[8].length===11)return{provider:"youtube",providerUid:a[8]};const i=e.match(t);if(i&&i[1])return{provider:"youtube",providerUid:i[1]}}return e.includes("facebook")?{provider:"facebook",providerUid:e}:null},X=({attribute:e,name:o,onChange:t,value:a,intlLabel:i,intlDescription:c})=>{const[l,u]=n.useState(null),[v,T]=n.useState(null),[y,C]=n.useState(null),[P,F]=n.useState(null),[N,m]=n.useState(!1),{formatMessage:f}=b();n.useEffect(()=>{let r;if(typeof a=="object")r=a;else try{r=JSON.parse(a)}catch{r={}}r?.privacyHash&&T(r.privacyHash),r?.url&&(F(r.url),r.provider&&r.providerUid?(m(!1),C(r.provider),u(r.providerUid)):m(!0))},[a]);const I=r=>{if(F(r.target.value||""),r.target.value){const d=$(r.target.value);r.target.value.length>0&&m(!0),d?.provider&&d?.providerUid&&(m(!1),C(d.provider),u(d.providerUid)),d?.privacyHash&&T(d.privacyHash);const D={url:r.target.value,provider:d?.provider||"",providerUid:d?.providerUid||"",privacyHash:d?.privacyHash||""};t({target:{name:o,value:JSON.stringify(D),type:e.type}})}else m(!1),t({target:{name:o,value:JSON.stringify({url:"",provider:void 0,providerUid:void 0,privacyHash:void 0}),type:e.type}})},L=f(i||{id:g("video-field.label"),defaultMessage:"Video"}),S=f(c||{id:g("video-field.title"),defaultMessage:"Video url"}),H=f({id:g("video-field.placeholder"),defaultMessage:"eg. https://vimeo.com/123456789"}),O=f({id:g("video-field.invalid.url"),defaultMessage:"Invalid video url"});return s.jsxs(M,{children:[s.jsxs(p.Root,{id:o,hint:S,error:N?O:void 0,children:[s.jsx(p.Label,{children:L}),s.jsx(p.Input,{type:"text",name:o,value:P,onChange:I,placeholder:H}),s.jsx(p.Hint,{}),s.jsx(p.Error,{})]}),y&&l&&s.jsxs(R,{paddingTop:4,justifyContent:"center",children:[y==="vimeo"&&s.jsx("iframe",{src:`https://player.vimeo.com/video/${l}${v?"/"+v:""}`,frameBorder:0,allowFullScreen:!0,height:200}),y==="youtube"&&s.jsx("iframe",{src:`https://www.youtube.com/embed/${l}`,frameBorder:0,allowFullScreen:!0,height:200}),y==="facebook"&&s.jsx("iframe",{src:`https://www.facebook.com/plugins/video.php?href=${l}&show_text=false&t=0`,frameBorder:"0",height:200,allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"})]})]})};export{X as default};
