import{b1 as M,aZ as x,ae as k,b$ as b,bv as y,j as e,b3 as s,b4 as c,b5 as B,bS as E,bV as C,bj as A,b6 as L,bT as U,bW as N,N as $,J as F,cz as I}from"./strapi-BzDuHlVM.js";import{R as f}from"./RelativeTime-BGJ1PWx_-CD-8inEM.js";const O=({permissions:n,headers:a=[],isLoading:l=!1,tokens:o=[],onConfirmDelete:i,tokenType:r})=>{const[{query:d}]=M(),{formatMessage:D,locale:R}=x(),[,S]=d&&d.sort?d.sort.split(":"):[void 0,"ASC"],T=k(),{trackUsage:v}=b(),m=y(R),u=[...o].sort((t,h)=>S==="DESC"?m.compare(h.name,t.name):m.compare(t.name,h.name)),{canDelete:g,canUpdate:j,canRead:p}=n,w=t=>()=>{p&&(v("willEditTokenFromList",{tokenType:r}),T(t.toString()))};return e.jsx(s.Root,{headers:a,rows:u,isLoading:l,children:e.jsxs(s.Content,{children:[e.jsx(s.Head,{children:a.map(t=>e.jsx(s.HeaderCell,{...t},t.name))}),e.jsx(s.Empty,{}),e.jsx(s.Loading,{}),e.jsx(s.Body,{children:u.map(t=>e.jsxs(s.Row,{onClick:w(t.id),children:[e.jsx(s.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:t.name})}),e.jsx(s.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",ellipsis:!0,children:t.description})}),e.jsx(s.Cell,{children:e.jsx(c,{textColor:"neutral800",children:e.jsx(f,{timestamp:new Date(t.createdAt)})})}),e.jsx(s.Cell,{children:t.lastUsedAt&&e.jsx(c,{textColor:"neutral800",children:e.jsx(f,{timestamp:new Date(t.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:D({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),j||p||g?e.jsx(s.Cell,{children:e.jsxs(B,{justifyContent:"end",children:[j&&e.jsx(q,{tokenName:t.name,tokenId:t.id}),g&&e.jsx(z,{tokenName:t.name,onClickDelete:()=>i?.(t.id),tokenType:r})]})}):null]},t.id))})]})})},P={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},W=({tokenName:n,tokenId:a,buttonType:l="edit",children:o})=>{const{formatMessage:i}=x();return e.jsx(H,{tag:$,to:a.toString(),onClick:r=>r.stopPropagation(),title:i(P[l],{target:n}),variant:"ghost",size:"S",children:o})},H=F(I)`
  padding: 0.7rem;

  & > span {
    display: flex;
  }
`,z=({tokenName:n,onClickDelete:a,tokenType:l})=>{const{formatMessage:o}=x(),{trackUsage:i}=b(),r=()=>{i("willDeleteToken",{tokenType:l}),a()};return e.jsx(C.Root,{children:e.jsxs(A,{paddingLeft:1,onClick:d=>d.stopPropagation(),children:[e.jsx(C.Trigger,{children:e.jsx(L,{label:o({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${n}`}),name:"delete",variant:"ghost",children:e.jsx(U,{})})}),e.jsx(N,{onConfirm:r})]})})},q=({tokenName:n,tokenId:a})=>e.jsx(W,{tokenName:n,tokenId:a,children:e.jsx(E,{})});export{O as T};
